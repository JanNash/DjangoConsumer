language: objective-c

xcode_workspace: DjangoConsumer.xcworkspace
xcode_scheme: DjangoConsumer
osx_image: xcode9.2
xcode_sdk: iphonesimulator11.2

cache:
  bundler: true
  cocoapods: true
  directories:
    - ~/.cocoapods
    - /home/travis/.rvm/

before_install:
  # See https://github.com/travis-ci/travis-ci/issues/8978 for further information
  - gem update --system

# install:
#   - bundle install
#   # pod repo update is commented out because the necessary 
#   # version of the specs repo should be cached
#   - pod repo update
#   - pod install

script:
  - set -o pipefail && xcodebuild clean build test -workspace DjangoConsumer.xcworkspace -scheme DjangoConsumer -destination 'platform=iOS Simulator,name=iPhone X,OS=latest' | xcpretty
